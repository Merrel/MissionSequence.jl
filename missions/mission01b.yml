#
# Event Sequence Description
#

# -----------------------------------------------------------------------------
# DE (Descent Element Branch)

Events:

  # ------------------------------------------ DE
  start_DE:
    Pf: 0.0
    duration: 2
    to:
      pass: Launch_DE
      fail: LOM
  
  launch_DE:
    Pf: 0.0
    Pf_dist: Beta(2, 100)
    duration: 2
    to:
      pass: burnTLI_DE
      fail: LOM

  burnTLI_DE:
    Pf: 0.0
    duration: 2
    to:
      pass: burnNRHO_DE
      fail: LOM

  burnNRHO_DE:
    Pf: 0.0
    duration: 2
    to:
      pass: loiter_DE
      fail: LOM

  loiter_DE:
    type: AND
    and:
      - burnNRHO_DE
      - docking_AE
    duration: 120
    to:
      pass: loiter_together
      fail: LOM

  # ------------------------------------------ AE
  start_AE:
    Pf: 0.0
    duration: 5
    to:
      pass: Launch_AE
      fail: LOM
  
  launch_AE:
    Pf: 0.0
    Pf_dist: Beta(2, 100)
    duration: 2
    to:
      pass: burnTLI_AE
      fail: LOM

  burnTLI_AE:
    Pf: 0.0
    duration: 2
    to:
      pass: burnNRHO_AE
      fail: LOM

  burnNRHO_AE:
    Pf: 0.0
    duration: 2
    to:
      pass: rendezvous_AE
      fail: LOM

  rendezvous_AE:
    Pf: 0.0
    duration: 4
    to:
      pass: loiter_AE
      fail: LOM

  loiter_AE:
    Pf: 0.0
    duration: 2
    to:
      pass: docking_AE
      fail: LOM

  docking_AE:
    Pf: 0.9
    duration: 2
    to:
      pass: retire_AE
      fail: retry_counter

  retry_counter:
    type: CountLimited
    max_count: 40
    duration: 4
    to:
      pass: docking_AE
      fail: LOM

  retire_AE:
    type: AND
    and:
      - burnNRHO_DE
      - docking_AE
    duration: 1
    to:
      pass: DONE
      fail: LOM
  # ------------------------------- After docking

  loiter_together:
    # type: AND
    # and:
    #   - burnNRHO_DE
    #   - docking_AE
    Pf: 0.0
    duration: 4
    to:
      pass: complete_mission
      fail: LOM

  complete_mission:
    Pf: 0.0
    duration: 2
    to:
      pass: COMPLETE
      fail: LOM